(this["webpackJsonpadventure-capitali-ts"]=this["webpackJsonpadventure-capitali-ts"]||[]).push([[0],[,,,,function(e,n,a){},,,,,function(e,n,a){e.exports=a(20)},,,,,,function(e,n,a){},function(e,n,a){},function(e,n,a){},function(e,n,a){},function(e,n,a){},function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),i=a(5),c=a.n(i),l=a(2),o=a(6),s=a.n(o),u=a(1);function m(e){return function(n,a){var t=a().businesses[e];n({type:"collect-income-start",index:e}),setTimeout((function(){return n(function(e){return function(n,a){n({type:"collect-income-done",index:e}),a().businesses[e].hasManager&&n(m(e))}}(e))}),t.incomeCooldownDuration)}}function p(e){return Object(u.a)({type:"upgrade-business"},e)}var d="state";function f(){return function(e){var n=localStorage.getItem(d);if(n){var a=JSON.parse(n),t=a.timestamp,r=a.state,i=function(e,n){return e.businesses.reduce((function(e,a){return a.hasManager?e+Math.floor(n/a.incomeCooldownDuration)*a.income*a.level:e}),0)}(r,Date.now()-t);e({type:"hydrate-state",state:Object(u.a)({},r,{capital:r.capital+i})}),r.businesses.forEach((function(n,a){n.hasManager&&e(m(a))}))}}}var b={capital:0,upgradeMultiplier:1,businesses:[{name:"Lemonade Stand",level:1,price:4,income:1,incomeCooldownDuration:1e3,managerPrice:1e3},{name:"Newspaper Delivery",level:0,price:60,income:60,incomeCooldownDuration:3e3,managerPrice:15e3},{name:"Car Wash",level:0,price:720,income:540,incomeCooldownDuration:6e3,managerPrice:1e5},{name:"Pizza Delivery",level:0,price:8640,income:4320,incomeCooldownDuration:12e3,managerPrice:5e5},{name:"Donut Shop",level:0,price:103680,income:51840,incomeCooldownDuration:24e3,managerPrice:12e5},{name:"Shrimp Boat",level:0,price:1244160,income:622080,incomeCooldownDuration:48e3,managerPrice:1e7},{name:"Hockey Team",level:0,price:14929920,income:7464960,incomeCooldownDuration:96e3,managerPrice:111111111},{name:"Movie Studio",level:0,price:179159040,income:89579520,incomeCooldownDuration:192e3,managerPrice:555555555},{name:"Bank",level:0,price:2149908480,income:1074954240,incomeCooldownDuration:384e3,managerPrice:1e10},{name:"Oil Company",level:0,price:25798901760,income:12899450880,incomeCooldownDuration:768e3,managerPrice:1e11}]},v=a(7),g=1.14,E=[1,10,100,"max"],h=[25,50,100,200,500];function y(e){for(var n=h.length;n>0;n--)if(e>=h[n-1])return n;return 0}var M=function(e,n){return Object(v.a)(e,(function(a){switch(n.type){case"collect-income-start":a.businesses[n.index].collectingIncome=!0;break;case"collect-income-done":var t=a.businesses[n.index];t.collectingIncome=!1,a.capital+=t.income*t.level;break;case"upgrade-business":var r=a.businesses[n.index];if(e.capital<n.price)break;a.capital-=n.price,r.level+=n.multiplier,r.price=Math.round(n.price*g);var i=y(r.level)-y(r.level-n.multiplier);r.incomeCooldownDuration/=Math.pow(2,i);break;case"hire-manager":var c=a.businesses[n.index];a.capital-=c.managerPrice,c.hasManager=!0;break;case"toggle-upgrade-multiplier":var l=(E.indexOf(e.upgradeMultiplier)+1)%E.length;a.upgradeMultiplier=E[l];break;case"hydrate-state":return n.state}}))},w=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),C=function(e){return e>=1e6?w.format(e/1e6)+"M":w.format(e)},x=(a(15),a(16),function(e){var n=Object(t.useState)(!1),a=Object(l.a)(n,2),i=a[0],c=a[1];return Object(t.useEffect)((function(){return c(!0)}),[e.children]),r.a.createElement("b",{className:"BouncyLabel ".concat(i?"BouncyLabel-animate":""),onAnimationEnd:function(){return c(!1)}},e.children)}),D=a(8),B=(a(17),function(e){var n=e.role,a=e.children,t=e.disabled,i=e.progress,c=Object(D.a)(e,["role","children","disabled","progress"]),l="TileButton TileButton-".concat(n||"primary"," ").concat(t?"TileButton-disabled":""," ").concat(i?"TileButton-progress":"");return r.a.createElement("div",Object.assign({},c,{className:l}),a)}),N=function(e){var n=e.business,a=e.dispatch,t=e.index,i=n.level>0&&!n.collectingIncome&&!n.hasManager;return r.a.createElement(B,{disabled:!i,onClick:function(){i&&a(m(t))},progress:n.collectingIncome},n.hasManager?r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null,C(n.level*n.income)),r.a.createElement("b",null,"MANAGED")):r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"COLLECT"),r.a.createElement(x,null,C(n.level*n.income)),r.a.createElement("b",null,"INCOME")))},k=function(e){var n=e.business,a=e.capital,t=e.dispatch,i=e.index,c=!n.hasManager&&n.level>0&&a>=n.managerPrice;return r.a.createElement(B,{disabled:!c,onClick:function(){c&&t(function(e){return function(n,a){n({type:"hire-manager",index:e}),a().businesses[e].collectingIncome||n(m(e))}}(i))},role:"tertiary"},r.a.createElement("b",null,"HIRE"),r.a.createElement("span",null,C(n.managerPrice)),r.a.createElement("b",null,"MANAGER"))},O=(a(4),function(e){var n=e.business,a=e.capital,t=e.dispatch,i=e.index,c=a>=n.price;return r.a.createElement("div",{className:"Business Business-forSale ".concat(c?"":"Business-locked")},r.a.createElement("div",{className:"Business-body"},r.a.createElement(B,{disabled:!c,onClick:function(){c&&t(function(e){return function(n,a){var t=a().businesses[e];n(p({index:e,multiplier:1,price:t.price}))}}(i))},role:"secondary"},r.a.createElement("b",null,n.name),r.a.createElement("h2",null,C(n.price)),r.a.createElement("b",null,c?"BUY":"INSUFFICIENT FUNDS"))))}),I=function(e){var n=e.business,a=e.capital,t=e.dispatch,i=e.index,c=e.upgradeMultiplier,l=function(e,n,a){var t=function(n){for(var a=e,t=a,r=1;r<n;r++)t+=a*=g;return Math.round(t)};if("number"===typeof a)return{multiplier:a,price:t(a)};var r=1;for(;t(r+1)<=n;)r+=1;return{multiplier:r,price:t(r)}}(n.price,a,c),o=l.multiplier,s=l.price,u=a>=s;return r.a.createElement(B,{disabled:!u,onClick:function(){u&&t(p({index:i,multiplier:o,price:s}))},role:"secondary"},r.a.createElement("b",null,"BUY x",o),r.a.createElement(x,null,n.level),r.a.createElement("b",null,C(s)))};var P=function(e){var n=e.business;return 0===n.level?r.a.createElement(O,e):r.a.createElement("div",{className:"Business"},r.a.createElement("div",{className:"Business-header"},r.a.createElement("b",null,n.name)),r.a.createElement("div",{className:"Business-body"},r.a.createElement(I,e),r.a.createElement(N,e),!n.hasManager&&r.a.createElement(k,e)))},S=(a(18),function(e){var n=e.dispatch,a=e.state,t=Math.ceil(a.businesses.length/2);return r.a.createElement("div",{className:"Businesses"},r.a.createElement("div",null,a.businesses.slice(0,t).map((function(e,t){return r.a.createElement(P,{key:t,business:e,capital:a.capital,dispatch:n,index:t,upgradeMultiplier:a.upgradeMultiplier})}))),r.a.createElement("div",null,a.businesses.slice(t).map((function(e,i){return r.a.createElement(P,{key:i,business:e,capital:a.capital,dispatch:n,index:t+i,upgradeMultiplier:a.upgradeMultiplier})}))))}),j=function(e){var n=e.dispatch,a=e.value;return r.a.createElement("button",{onClick:function(){return n({type:"toggle-upgrade-multiplier"})}},"Buy",r.a.createElement("h3",null,"max"===a?"Max available":r.a.createElement(r.a.Fragment,null,"x",a)),"stores")},T=function(){var e=s()(M,b),n=Object(l.a)(e,2),a=n[0],i=n[1];return Object(t.useEffect)((function(){function e(){i((function(e,n){var a=n(),t={state:Object(u.a)({},a,{businesses:a.businesses.map((function(e){return Object(u.a)({},e,{collectingIncome:!1})}))}),timestamp:Date.now()};localStorage.setItem(d,JSON.stringify(t))}))}return i(f()),window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[i]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("h1",null,C(a.capital)),r.a.createElement(j,{dispatch:i,value:a.upgradeMultiplier})),r.a.createElement(S,{dispatch:i,state:a}))};a(19);c.a.render(r.a.createElement(T,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.d09a67e0.chunk.js.map